"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var l,u=e[Symbol.iterator]();!(r=(l=u.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var DevTools=function(){function e(){_classCallCheck(this,e)}function t(e){return n.apply(this,arguments)}var n,r,o;function i(){return r.apply(this,arguments)}function l(e,t){return o.apply(this,arguments)}return _createClass(e,[{key:"generateTree",value:function(t){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"parentId";return t.filter(function(e){return e[o]===r}).map(function(e){return _objectSpread(_objectSpread({},e),{},{children:n.generateTree(t,e.id,o)})})}},{key:"allEquals",value:(o=function(t,n){if(t===n)return!0;if(t instanceof Date&&n instanceof Date)return t.getTime()===n.getTime();if(!t||!n||"object"!==_typeof(t)&&"object"!==_typeof(n))return t===n;if(t.prototype!==n.prototype)return!1;var e=Object.keys(t);return e.length===Object.keys(n).length&&e.every(function(e){return allEquals(t[e],n[e])})},l.toString=function(){return o.toString()},l)},{key:"getColonTimeFromDate",value:function(e){return e.toTimeString().slice(0,8)}},{key:"getDaysDiffBetweenDates",value:function(e,t){return(t-e)/864e5}},{key:"changeTimeYear",value:function(e){e=parseInt(e);var t=(e=new Date(e)).getFullYear(),n=e.getMonth()+1,e=e.getDate();return t+"-"+(10<=n?n:"0"+n)+"-"+(10<=e?e:"0"+e)+" "}},{key:"formateSeconds",value:function(e){var t=parseInt(e),n=0,r=0,e=0;return 60<t&&(n=parseInt(t/60),t=parseInt(t%60),60<n&&(r=parseInt(n/60),n=parseInt(n%60),23<r&&(e=parseInt(r/24),r=parseInt(r%24)))),"".concat(e.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))}},{key:"formatNowTime",value:function(e){function t(e){return e<10?"0"+e:e}e=parseInt(e);var n=(e=new Date(e)).getFullYear(),r=e.getMonth()+1,o=e.getDate(),i=e.getHours(),l=e.getMinutes(),e=e.getSeconds();return n+"-"+t(r)+"-"+t(o)+" "+t(i)+":"+t(l)+":"+t(e)}},{key:"bottomVisible",value:function(){return document.documentElement.clientHeight+window.scrollY>=(document.documentElement.scrollHeight||document.documentElement.clientHeight)}},{key:"isBrowserTabFocused",value:function(){return!document.hidden}},{key:"scrollToTop",value:(r=function(){var e=document.documentElement.scrollTop||document.body.scrollTop;0<e&&(window.requestAnimationFrame(scrollToTop),window.scrollTo(0,e-e/8))},i.toString=function(){return r.toString()},i)},{key:"smoothScroll",value:function(e){document.querySelector(e).scrollIntoView({behavior:"smooth"})}},{key:"getScrollPosition",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return{x:void 0!==e.pageXOffset?e.pageXOffset:e.scrollLeft,y:void 0!==e.pageYOffset?e.pageYOffset:e.scrollTop}}},{key:"preventScroll",value:function(e){e=window.scrollY,document.body.style["overflow-y"]="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.top=-e+"px"}},{key:"recoverScroll",value:function(e){document.body.style["overflow-y"]="auto",document.body.style.position="static",window.scrollTo(0,e)}},{key:"elementIsVisibleInViewport",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.getBoundingClientRect(),r=n.top,o=n.left,i=n.bottom,l=n.right,e=window,n=e.innerHeight,e=e.innerWidth;return t?(0<r&&r<n||0<i&&i<n)&&(0<o&&o<e||0<l&&l<e):0<=r&&0<=o&&i<=n&&l<=e}},{key:"launchFullscreen",value:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullScreen()}},{key:"exitFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},{key:"formToObject",value:function(e){return Array.from(new FormData(e)).reduce(function(e,t){var n=_slicedToArray(t,2),t=n[0],n=n[1];return _objectSpread(_objectSpread({},e),{},_defineProperty({},t,n))},{})}},{key:"copyToClipboard",value:function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);e=0<document.getSelection().rangeCount&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),e&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(e))}},{key:"formatMoney",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"formatFileSize",value:function(e){return e<1024?e+"B":e<1048576?(e/1024).toFixed(2)+"KB":e<1073741824?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB"}},{key:"strTrim",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(!t||1===t||2===t||3===t||4===t)switch(t){case 1:return e.replace(/\s/g,"");case 2:return e.replace(/(^\s)|(\s*$)/g,"");case 3:return e.replace(/(^\s)/g,"");case 4:return e.replace(/(\s$)/g,"");default:return e}}},{key:"detectDeviceType",value:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop"}},{key:"isAndroidPlatform",value:function(){var e=navigator.userAgent;return-1<e.indexOf("Android")||-1<e.indexOf("Adr")}},{key:"getUrlData",value:function(e){"#/"===e.slice(e.length-2,e.length)&&(e=e.slice(0,e.length-2));var n={},e=e.split("?")[1];return e?(e.split("&").map(function(e){var t=e.split("=");n[e.split("=")[0]]=t[1]}),n):{}}},{key:"uploadImage",value:function(e){var r=e.url,e=e.file,o=new FormData;return o.append("imgFile",e),new Promise(function(t,n){axios({method:"post",url:r,data:o,headers:{"Content-Type":"multipart/form-data"}}).then(function(e){t(e.data)}).catch(function(e){n(e)})})}},{key:"setDomRem",value:function(){var t,n,r,o,i,e,l,u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:8;function a(){var e=l.getBoundingClientRect().width,e=(e=(t=t||540)<e?t:e)*+u/375;if(o="html{font-size:"+e+"px !important}",r=document.getElementById("rootsize")||document.createElement("style"),document.getElementById("rootsize")||(document.getElementsByTagName("head")[0].appendChild(r),r.id="rootsize"),r.styleSheet)r.styleSheet.disabled||(r.styleSheet.cssText=o);else try{r.innerHTML=o}catch(e){r.innerText=o}l.style.fontSize=e+"px"}t=750,i=document,e=window,l=i.documentElement,a(),e.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(a,300)},!1),e.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(n),n=setTimeout(a,300))},!1),"complete"===i.readyState?i.body.style.fontSize="16px":i.addEventListener("DOMContentLoaded",function(e){i.body.style.fontSize="16px"},!1)}},{key:"rewirteLog",value:function(){console.log=function(){}}},{key:"typeOf",value:function(e){e=Object.prototype.toString.call(e).split(" ")[1];return e.slice(0,e.length-1)}},{key:"deepClone",value:(n=function(e){var t;if("object"===_typeof(e))if(Array.isArray(e))for(var n in t=[],e)t.push(deepClone(e[n]));else if(null===e)t=null;else if(e.constructor===RegExp)t=e;else for(var r in t={},e)t[r]=deepClone(e[r]);else t=e;return t},t.toString=function(){return n.toString()},t)},{key:"lazyImage",value:function(){var r,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,o=Array.prototype.slice.call(e?document.querySelectorAll(e):document.getElementsByTagName("img"));function t(){for(var e=o.length,t=0;t<e;t++){var n=o[t];n.getBoundingClientRect().top<document.documentElement.clientHeight&&(n.src=n.dataset.src,o.splice(t,1),e--,t--,0===o.length&&document.removeEventListener("scroll",r))}}o=o.filter(function(e){return e.dataset.src}),function(){{var n;"IntersectionObserver"in window?(n=new IntersectionObserver(function(e,t){e.forEach(function(e,t){e.isIntersecting&&((e=e.target).src=e.dataset.src,e.classList.remove("lazy-image"),n.unobserve(e),o.splice(t,1))})}),o.forEach(function(e){n.observe(e)})):(t(),r=function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:30,i=null,l=null,u=this;return function(){var e=+new Date,t=Array.prototype.slice.call(arguments);clearTimeout(l),o<e-(i=i||e)?(n.apply(u,t),i=e):l=setTimeout(function(){n.apply(u,t)},r)}}(t),document.addEventListener("scroll",r.bind(this)))}}()}},{key:"debounce",value:function(r,o){function e(){var e,t=this,n=arguments;return i&&clearTimeout(i),u?(e=!i,i=setTimeout(function(){i=null},o),e&&(l=r.apply(t,n))):i=setTimeout(function(){r.apply(t,n)},o),l}var i,l,u=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return e.cancel=function(){clearTimeout(i),i=null},e}},{key:"throttle",value:function(n,r,o){var i,l,u,a=0;o=o||{};function c(){a=!1===o.leading?0:(new Date).getTime(),i=null,n.apply(l,u),i||(l=u=null)}function e(){var e=(new Date).getTime();a||!1!==o.leading||(a=e);var t=r-(e-a);l=this,u=arguments,t<=0||r<t?(i&&(clearTimeout(i),i=null),a=e,n.apply(l,u),i||(l=u=null)):i||!1===o.trailing||(i=setTimeout(c,t))}return e.cancel=function(){clearTimeout(i),a=0,i=null},e}},{key:"infinityScrolling",value:function(e,t){var n,r=this,o=this;this.infinityScrolling.bol=!0,"IntersectionObserver"in window?new IntersectionObserver(function(e){r.infinityScrolling.bol&&e[0].intersectionRatio&&t()}).observe(e):(n=this.throttle(function(){o.infinityScrolling.bol&&o.elementIsVisibleInViewport(e,!0)&&t()},100),document.addEventListener("scroll",n)),this.infinityScrolling.closeMonitor=function(){"IntersectionObserver"in window||(n.cancel(),document.removeEventListener("scroll",n))}}},{key:"deleteHTMLTags",value:function(e){return e.replace(/<[^>]*>/g,"")}},{key:"getDomStyle",value:function(e,t){return getComputedStyle(e)[t]}},{key:"JSB_init",value:function(){var e=navigator.userAgent,t=-1<e.indexOf("Android")||-1<e.indexOf("Adr");e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);window.setupWebViewJavascriptBridge=t?function(e){window.WebViewJavascriptBridge?e(window.WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){e(window.WebViewJavascriptBridge)},!1)}:function(e){if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)},console.log(t,"isAndroid, 是否安卓"),t&&window.setupWebViewJavascriptBridge(function(e){e.init(function(e,t){t("JS 返回给原生的消息内容")})})}},{key:"JSB_appMethod",value:function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(t,e){if(!window.setupWebViewJavascriptBridge)return e("请先将 JSBriged.js 引入！");window.setupWebViewJavascriptBridge(function(e){e.callHandler(n,r,function(e){t(e)})})})}},{key:"JSB_jsMethod",value:function(n){return new Promise(function(t,e){if(!window.setupWebViewJavascriptBridge)return e("请先将 JSBriged.js 引入！");window.setupWebViewJavascriptBridge(function(e){e.registerHandler(n,function(e){t(e)})})})}}]),e}();module.exports=DevTools;